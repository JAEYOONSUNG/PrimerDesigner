% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/design_cloning_primers.R
\name{design_cloning_primers}
\alias{design_cloning_primers}
\title{Design Cloning Primers for gRNA Library}
\usage{
design_cloning_primers(
  gRNA_df,
  vector_file = NULL,
  start = NULL,
  end = NULL,
  cloning_method = "golden_gate",
  enzyme = "BbsI",
  custom_overhangs = NULL,
  tm_target = 60,
  overlap_length = 20,
  add_g = TRUE,
  name_pattern = "sgRNA_{locus_tag}_{method}_{dir}",
  output_file = NULL,
  output_dir = NULL,
  genome_seq = NULL,
  genbank_table = NULL,
  genbank_file = NULL,
  upstream_bp = 500,
  downstream_bp = 500,
  kill_snapgene = TRUE
)
}
\arguments{
\item{gRNA_df}{A data frame containing gRNA data (output from \code{run_gRNA_list_generator}
or \code{generate_gRNA_for_locus_tags}). Must contain \code{protospacer} column.
For deletion mode, must contain \code{locus_tag} column.}

\item{vector_file}{Path to the vector file (.dna, .gb, .fasta). Required for Gibson
and Deletion modes. Optional for Golden Gate (not used).}

\item{start}{Integer. Vector insertion site start position (1-based). Required for Gibson/Deletion.}

\item{end}{Integer. Vector insertion site end position (1-based). Required for Gibson/Deletion.}

\item{cloning_method}{Character string: \code{"golden_gate"} (default), \code{"gibson"},
or \code{"deletion"} (4-primer arm-based Gibson Assembly).}

\item{enzyme}{Character string for Golden Gate enzyme: "BbsI" (default), "BsaI", or "BsmBI".}

\item{custom_overhangs}{Named list with custom overhang sequences:
\code{list(F_5prime = "CACC", R_5prime = "AAAC")}. Overrides enzyme defaults.}

\item{tm_target}{Numeric. Target melting temperature for Gibson/Deletion primers (default: 60).}

\item{overlap_length}{Integer. Gibson/Deletion initial overlap length in bp (default: 20).}

\item{add_g}{Logical. Whether to add a 5' G for U6 promoter compatibility (default: TRUE).
Adds G to forward oligo if spacer doesn't start with G. Golden Gate only.}

\item{name_pattern}{Character string. Template for primer naming with placeholders.
Available tokens: \code{{gene}}, \code{{locus_tag}}, \code{{rank}}, \code{{dir}} (F/R),
\code{{nuclease}}, \code{{prefix}}, \code{{method}} (OA/IA), \code{{spacer_num}}.
Default: \code{"sgRNA_{locus_tag}_g{rank}_{method}_{dir}"} where
OA = Oligo Annealing (Golden Gate), IA = Inverse PCR Amplification (Gibson).}

\item{output_file}{Character string. Path to save Excel output (default: NULL, no file saved).}

\item{output_dir}{Character string. Directory to save gRNA vector GenBank files.
For golden_gate/gibson: generates one \code{{gRNA_name}_vector.gbk} per gRNA,
showing the spacer inserted into the vector. Requires \code{vector_file}, \code{start},
and \code{end}. For deletion: passed through to \code{batch_deletion_primers()}.
Default: NULL (no GenBank output).}

\item{genome_seq}{Character string. Full genome sequence. Required for deletion mode
(unless \code{genbank_file} is provided).}

\item{genbank_table}{Data frame with columns: locus_tag, start, end. Required for deletion mode
(unless \code{genbank_file} is provided).}

\item{genbank_file}{Character string. Path to a genome GenBank file (.gb, .gbk, .gbff).
When provided for deletion mode, \code{genome_seq} and \code{genbank_table} are
automatically extracted from this file.}

\item{upstream_bp}{Integer. Upstream arm length for deletion mode (default: 500).}

\item{downstream_bp}{Integer. Downstream arm length for deletion mode (default: 500).}

\item{kill_snapgene}{Logical. Kill running SnapGene before reading .dna files (default: FALSE).}
}
\value{
For golden_gate/gibson: the input data frame with added primer columns.
For deletion: a data frame with 4 primers per unique locus_tag.
}
\description{
Designs cloning primers (oligos) for inserting gRNA spacers into an expression vector.
Supports Golden Gate Assembly (BbsI, BsaI, BsmBI), Gibson Assembly, and
Deletion (4-primer Gibson arm) methods.
}
\details{
For Golden Gate and Gibson (simple 2-primer spacer insertion), each gRNA in the
data frame receives a forward and reverse primer pair.

For Deletion mode (\code{cloning_method = "deletion"}), the function designs
4 primers per locus_tag (upstream_F/R + downstream_F/R) with Tm-optimized arms
and overlap regions. This mode requires additional parameters: \code{genome_seq},
\code{genbank_table}, \code{upstream_bp}, \code{downstream_bp}.
}
\examples{
\dontrun{
# Golden Gate with BbsI (OA = Oligo Annealing)
# Primer names: sgRNA_[locus_tag]_g[rank]_OA_F / _OA_R
primers <- design_cloning_primers(
  gRNA_df = gRNA_lib,
  cloning_method = "golden_gate",
  enzyme = "BbsI"
)

# Gibson Assembly (IA = Inverse PCR Amplification)
# Primer names: sgRNA_[locus_tag]_g[rank]_IA_F / _IA_R
primers <- design_cloning_primers(
  gRNA_df = gRNA_lib,
  vector_file = "my_vector.dna",
  start = 1234, end = 1256,
  cloning_method = "gibson"
)

# Deletion (4-primer Gibson arms) — with separate genome_seq + genbank_table
del_primers <- design_cloning_primers(
  gRNA_df = gRNA_lib,
  vector_file = "my_vector.dna",
  start = 1234, end = 1256,
  cloning_method = "deletion",
  genome_seq = genome_sequence,
  genbank_table = genbank_df,
  output_file = "deletion_primers.xlsx"
)

# Deletion — with genome GenBank file (auto-extract genome_seq + genbank_table)
del_primers <- design_cloning_primers(
  gRNA_df = gRNA_lib,
  vector_file = "my_vector.dna",
  start = 1234, end = 1256,
  cloning_method = "deletion",
  genbank_file = "my_genome.gbk",
  output_file = "deletion_primers.xlsx"
)
}
}
